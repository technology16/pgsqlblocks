# pgSqlBlocks

java-приложение для работы с блокировками в СУБД PostgreSQL

### Версии

1.8.0

* Добавлена настройка для ограничения количества блокировок в списке и в файлах журналов
* Обновлены версии библиотек

1.7.6

* Обновлена уязвимая библиотека log4j2

1.7.5

* Версия PostgreSQL в настройках БД заменена на опцию чтения типа процесса
* Исправлена утечка памяти при большом количестве блокировок
* Исправлен фильтр для заблокированных процессов
* Обновлена библиотека PgPass

1.7.4

* Обновлены версии SWT-библиотек
* Обновлена версия Log4j2
* Обновлен драйвер JDBC

1.7.3

* Исправлены ошибки при обновлении списка процессов БД

1.7.2

* Исправлена ошибка при подсчете количества процессов

1.7.1

* Добавлена возможность сортировки списка баз данных по имени или количеству процессов
* Удалены сборки для 32-битных систем
* Log4j заменен на Log4j2
* Обновлены версии SWT-библиотек
* Обновлен драйвер JDBC

1.7.0

* Добавлено сохранение расположения и видимости столбцов между перезапусками
* Добавлена сортировка по нескольким столбцам
* Добавлена очистка списка процессов и блокировок при отключении от БД
* Исправлена ошибка сохранения блокировок в Windows
* Исправлена ошибка в отображении дерева сохраненных блокировок
* Убрана автоматическая прокрутка при обновлении процессов и блокировок
* Изменена иконка ожидающего процесса
* Обновлен драйвер JDBC

1.6.0

* Добавлены версии PostgreSQL для подключений (10.0, 9.6 и т.д.)
  * Если версия не задана, используется версия по-умолчанию 10.0
  * При старте приложения предлагает всем подключениям получить версию с сервера
  * В список процессов добавлена колонка backend_type (10.0+, https://www.postgresql.org/docs/10/static/monitoring-stats.html#PG-STAT-ACTIVITY-VIEW)
* В список процессов добавлена колонка с продолжительностью запроса
* В список БД добавлена колонка с количеством процессов
* Появляется окно ввода пароля при подключении если пароль не задан в настройках и в pgpass
* Диалог с подробной информацией о процессе открывается при нажатии ввода в таблице процессов 
* Улучшения в пользовательском интерфейсе
  * Панель с информацией о процессе сделана изменяемого размера
  * Улучшена видимость и выраженность элементов интерфейса

1.5.0

* Выбор нескольких процессов для остановки/уничтожения
* Исправлена сортировка колонки STATE при подключении к PostgreSQL 10
* Исправлено состояние кнопок отмены/уничтожения процессов, добавлены тултипы
* Исправлено автоподключение при добавлении новой БД
* Обновлен драйвер JDBC

1.4.0

* Возникающие блокировки автоматически пишутся в журнал и в файл
* Добавлен вид для просмотра сохраненных журналов блокировок (кнопка на тулбаре)
* Дерево процессов теперь реагирует на двойной клик
* Переработан UI, сделаны отдельные фильтры процессов для каждой бд
* Фильтр процессов по-умолчанию имеет условие "содержит" для всех полей фильтра
* SQL запросы в таблице обрезаются до переноса строки для предотвращения изменения высоты строк

1.3.8

* Сделано автоматическое сохранение блокировок в журнал (пока не пишется на диск)

1.3.7

* Исправлено отображение циклических случаев блокировки
* Сделана локализация приложения. Доступные языки: русский, английский
* Время в лог консоли форматируется в соответствии с локалью
* Исходный код приложения выложен в открытый доступ под лицензией Apache License 2.0

1.3.6

* Добавлена кнопка отображения/скрытия окна с логами
* Исправлена ситуация с прекращением обновления при возникновении тройных блокировок 

1.3.5

* При попытке отменить/терминировать процесс появляется окно подтверждения (отключить можно в настройках)
* Подтверждение выхода из программы сделано отключаемым (отключить можно в настройках)
* Сделана сборка для macOS (Cocoa)
* Диалог с настройками был реорганизован
* Исправлен диалог фильтра (не все контролы влезали)

1.3.4

* Колонки стали перемещаемыми и скрываемыми (в настройках), названия переведены на русский, тултип на колонке показывает исходное название
* Улучшен механизм обновления списка процессов (фикс автоподключения по закрытию настроек)
* Добавлено меню приложения, диалог "О программе"

1.3.3

* При появлении блокировок в БД изменяется ее иконка - добавлен декоратор "красный замок"
* В настройки добавлена галочка "Скрывать собственные запросы" для скрытия процесса самого pgSqlBlocks из списка процессов
* Добавлено всплывающее уведомление в трее при появлении блокировок в подключенных БД:
  * Работает на Windows, на Ubuntu сообщение появляется поверх приложения
  * По-умолчанию отключено, изменить можно в настройках
* Улучшена панель с логами, теперь доступны следующие возможности:
  * Автопрокрутка включена по-умолчанию
  * Прокрутка колесом вверх отключает автопрокрутку
  * Прокрутка колесом вниз включает автопрокрутку
  * Нажатие клавиши "Ввод" добавляет перенос строки в конец текста
* Исправлено высокое потребление памяти при частом обновлении БД
* Исправлена выгрузка и загрузка блокировок в файл
* Улучшено информирование об обновлении БД иконкой

1.3.2

  - Добавлена иконка приложения в системном трее, изменяющаяся в зависимости от наличия заблокированных процессов

1.3.1

  - Idle-процессы показываются по-умолчанию, изменить поведение можно в настройках
  - Улучшено чтение pgpass файла
  - Исправлено обновление списка при сортировке
  - Исправлен цвет текста SQL-запроса выбранного процесса
  - Исправлена ошибка при попытке отмены своего же процесса

1.3.0

  - Добавлена возможность отменить текущее и автообновление серверов
  - Обновление серверов не блокирует UI
  - Сервер в состоянии обновления теперь имеет свою иконку
  - Добавлено контекстное меню в списке серверов
  - Добавлена иконка приложения
  - Обновлена версия JDBC-драйвера (поддержка юникода в сообщениях об ошибках)
  - Исправление ошибок

